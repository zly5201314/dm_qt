define(["commonTips"],function(a){var t={locPage:function(a){var t;return $(a.pagination).find("li").each(function(){$(this).hasClass("active")&&(t=$(this).find("a").html())}),t},locStatus:function(a){var t=a.status;return $(a.tabs).find("li").each(function(){$(this).hasClass("current")&&(t=$(this).find("a").attr("data-id"))}),t},next:function(a){var l=t.locPage(a);if(l>1)return l--},prev:function(a){var l,e=t.locPage(a);return e<$(a.pagination).find("li").length-2&&(l=e++),l}};return function(l){var e,n,o={postUrl:"/my/message.html",getParams:"",pageBelong:"",isPushstate:!1,page:null,parentEle:"#messages",pagination:"#pagination",tabs:"",status:"all",needfirstload:!0,callbackfunc:null};"list"!=(o=$.extend(o,l)).pageBelong?(o.needfirstload&&(a.loadShow.init(),$.post(o.postUrl+"?page="+o.page,{},function(t){o.pageBelong||a.loadShow.close(),$(o.parentEle).html(t),o.callbackfunc&&o.callbackfunc.call()})),$(o.parentEle).on("click"," .prev",function(l){if(l.stopPropagation(),l.preventDefault(),e=t.locStatus(o),n=t.prev(o),$(this).hasClass("disabled"))return!1;a.loadShow.init(),$.post(o.postUrl+"?page="+n,{status:e},function(t){o.pageBelong||a.loadShow.close(),$(o.parentEle).html(t),o.callbackfunc&&o.callbackfunc.call()})}),$(o.parentEle).on("click"," .next",function(l){if(l.stopPropagation(),l.preventDefault(),e=t.locStatus(o),n=t.next(o),$(this).hasClass("disabled"))return!1;a.loadShow.init(),$.post(o.postUrl+"?page="+n,{status:e},function(t){o.pageBelong||a.loadShow.close(),$(o.parentEle).html(t),o.callbackfunc&&o.callbackfunc.call()})}),$(o.parentEle).on("click"," li a",function(l){l.stopPropagation(),l.preventDefault(),e=t.locStatus(o);var i=$(this).attr("data-page");n=Number(i)+1,a.loadShow.init(),$.get(o.postUrl+"?page="+n,{status:e},function(t){a.loadShow.close(),$(o.parentEle).html(t),o.callbackfunc&&o.callbackfunc.call()})}),$(o.parentEle).on("click",o.pagination+" span.go-page",function(l){l.stopPropagation(),l.preventDefault(),e=t.locStatus(o);var n=$(this).siblings("input").val();a.loadShow.init(),$.get(o.postUrl+"?page="+n,{status:e},function(t){o.pageBelong||a.loadShow.close(),$(o.parentEle).html(t),o.callbackfunc&&o.callbackfunc.call()})})):($(o.parentEle+" "+o.pagination+" .prev").off("click"),$(o.pagination).on("click"," .prev",function(l){if(l.stopPropagation(),l.preventDefault(),e=t.locStatus(o),n=t.prev(o),$(this).hasClass("disabled"))return!1;"list"==o.pageBelong&&($(o.parentEle).html(""),a.listloadShow.init({wrapcon:o.parentEle}),$.get(o.postUrl+"?page="+n,o.getParams,function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()}))}),$(o.parentEle+" "+o.pagination+" .next").off("click"),$(o.pagination).on("click"," .next",function(l){if(l.stopPropagation(),l.preventDefault(),e=t.locStatus(o),n=t.next(o),$(this).hasClass("disabled"))return!1;"list"==o.pageBelong&&($(o.parentEle).html(""),a.listloadShow.init({wrapcon:o.parentEle}),$.get(o.postUrl+"?page="+n,o.getParams,function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()}))}),$(o.parentEle+" "+o.pagination+" li a").off("click"),$(o.pagination).on("click"," li a",function(l){l.stopPropagation(),l.preventDefault(),e=t.locStatus(o);var i=$(this).attr("data-page");n=Number(i)+1,"list"==o.pageBelong&&($(o.parentEle).html(""),a.listloadShow.init({wrapcon:o.parentEle}),o.isPushstate?$.get(o.postUrl+"?page="+n,location.search.slice(1),function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()}):$.get(o.postUrl+"?page="+n,o.getParams,function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()}))}),$(o.parentEle+" "+o.pagination+" span.go-page").off("click"),$(o.pagination).on("click"," span.go-page",function(l){l.stopPropagation(),l.preventDefault(),e=t.locStatus(o);var n=$(this).siblings("input").val();"list"==o.pageBelong&&($(o.parentEle).html(""),a.listloadShow.init({wrapcon:o.parentEle}),o.isPushstate?$.get(o.postUrl+"?page="+n,location.search.slice(1),function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()}):$.get(o.postUrl+"?page="+n,o.getParams,function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()}))})),""==o.pageBelong&&$(o.tabs).find("a").on("click",function(t){t.preventDefault();var l=$(this).attr("data-id");l>=0&&(n=1),a.loadShow.init(),$.get(o.postUrl+"?page="+n,{status:l},function(t){$("#messages").html(t),o.pageBelong||a.loadShow.close()})}),o.tabs&&$(o.tabs).on("click"," a",function(t){if(t.preventDefault(),"list"==o.pageBelong){$(o.parentEle).html(""),a.listloadShow.init({wrapcon:o.parentEle});var l=$(this).data("key");o.getParams[""+l]=$(this).data("type"),n=1,$.get(o.postUrl+"?page="+n,o.getParams,function(t){$(o.parentEle).html(t),o.pageBelong||a.loadShow.close(),o.callbackfunc.call()})}})}});